(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(25729)}])},25729:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return et},default:function(){return en}});var s=n(85893),a=n(64487),l=n(67294),r=n(9008),o=n.n(r),i=n(11163),c=n(41664),d=n.n(c),h=n(76812),u=n(66261),m=n(33299),x=n(92981),p=n(12023),g=n(14258),f=n(75617),b=n(9862),w=n(79659),j=n(38323),v=n(82010),N=n(30399),y=n(11319),k=n(29758),S=n(81829),C=n(635),P=n(45138),A=n(25675),I=n.n(A),T=n(50699),D=n(97910),E=(0,l.memo)(function(e){let{show:t,setShow:n,imageIndex:a,allImages:r,containerWidth:o}=e,handleClose=()=>n(!1),[i,c]=(0,l.useState)(a),d="https://www.google.com/s2/favicons?domain=".concat(new URL(r[i].page_url).hostname),{isXs:h,isMd:u,isSm:m}=(0,D.k)(),x=h?120:200;return(0,s.jsx)(T.Z,{show:t,onHide:handleClose,children:(0,s.jsxs)(T.Z.Body,{className:"px-0",children:[(0,s.jsxs)("button",{style:{display:"flex",alignItems:"left",justifyContent:"left",borderRadius:"50px",color:"white",width:"fit-content"},className:"btn btn-no-border mt-4 lift fs-5 fw-bold pb-3 ps-0",type:"button",onClick:handleClose,children:[(0,s.jsx)("i",{className:"mx-2 fe fe-x"}),"Close"]}),(0,s.jsx)("div",{style:{width:h||u||m?o:1.2*o,height:o/1.5,position:"relative",left:"50%",transform:"translateX(-50%)"},children:(0,s.jsx)(I(),{src:r[i].image_url,layout:"fill",alt:r[i].alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"mt-5",children:r.slice(0,4).map((e,t)=>(0,s.jsx)("div",{style:{width:x,height:x,position:"relative",border:t===i?"2px solid #e6f0fd":"none",borderRadius:"12px"},className:"mx-2 mb-5",onClick:()=>c(t),children:(0,s.jsx)(I(),{src:e.image_url,layout:"fill",alt:e.alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})},"image-".concat(e.image_url)))}),(0,s.jsxs)("a",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",backgroundColor:"#575a7b",borderRadius:"50px",color:"white",width:"fit-content",margin:"auto"},className:"lift",href:r[i].page_url,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("img",{src:d,style:{width:"20px",height:"20px"},className:"ms-1 me-2"}),(0,s.jsx)("span",{className:"me-2",children:new URL(r[i].page_url).hostname})]})]})})}),M=(0,l.memo)(function(e){let{url:t,width:n,height:a,onError:r,onHide:o,allImages:i,containerWidth:c,index:d}=e,[h,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!0);return(0,s.jsxs)("div",{className:"mx-2 mb-4 mt-2",children:[h&&(0,s.jsx)(E,{show:h,setShow:u,allImages:i,imageIndex:d,containerWidth:c}),m&&(0,s.jsx)("div",{style:{width:n,height:a,position:"relative"},children:(0,s.jsx)(I(),{src:t,layout:"fill",alt:"",style:{borderRadius:"10px"},objectFit:"cover",onError:()=>{r()},className:"image-hover",onClick:()=>{u(!0),w.n.track("Image Clicked",{url:t})},onLoadingComplete:e=>{let{naturalWidth:n,naturalHeight:s}=e;console.log(n,s),(n<100||s<100)&&(x(!1),o(t))},unoptimized:!0})})]})}),R=(0,l.memo)(function(e){let{images:t}=e,n=[...new Set(null==t?void 0:t.filter(e=>(0,f.jv)(e.image_url)).map(e=>e.image_url))],a=(0,l.useRef)(null),[r,o]=(0,l.useState)(75);(0,l.useEffect)(()=>{let updateWidth=()=>{a.current&&o(a.current.offsetWidth)};return window.addEventListener("resize",updateWidth),updateWidth(),()=>window.removeEventListener("resize",updateWidth)},[]);let[i,c]=(0,l.useState)([]),handleImageError=e=>{c(t=>[...t,e])},[d,h]=(0,l.useState)([]),handleHideImage=e=>{h(t=>[...t,e])},u=n&&n.length>0?Math.min(n.length-d.length,S.nb):0,m=Math.min((r-35)/u,500),x=null==t?void 0:t.filter(e=>!d.includes(e.image_url)&&!i.includes(e.image_url));return(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"left"},ref:a,children:null==n?void 0:n.filter(e=>!i.includes(e)&&!d.includes(e)).slice(0,n.length>=S.nb?S.nb-1:S.nb).map((e,t)=>{let n=u===S.nb,a=m;return 1===u?a=r-25:n&&0===t&&(a=2*m),(0,s.jsx)(M,{url:e,width:a,height:m,onError:()=>handleImageError(e),onHide:()=>handleHideImage(e),allImages:x,containerWidth:r,index:t},"answer-image-".concat(e))})})});let _=(0,s.jsxs)("p",{className:"placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),F={strict:!1,output:"mathml"};function FootnoteLink(e){let{href:t="",children:n,...a}=e,{theme:l,setTheme:r,resolvedTheme:o}=(0,v.F)(),i="#333",c="#d6d6d6";if("object"==typeof n&&null!==n&&Array.isArray(n)&&n.length>0){let e=n[0];if(e===f.qz)return(0,s.jsx)("div",{className:"spinner-grow spinner-grow-sm",role:"status"});if(Number.isInteger(Number(e))||Number.isInteger(Number(e.substring(1,e.length-1))))return(0,s.jsx)(P.Z,{message:t,placement:"top",children:(0,s.jsx)("sup",{children:(0,s.jsx)("a",{href:t,target:"_blank",className:"me-1",rel:"noopener noreferrer",style:"dark"===o?{display:"inline-block",borderRadius:"50%",backgroundColor:"#333",color:"#fff",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"}:{display:"inline-block",borderRadius:"50%",backgroundColor:"#d6d6d6",color:"#333",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"},onMouseOver:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onMouseOut:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},onFocus:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onBlur:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},children:Number(e)+1})})})}return(0,s.jsx)("a",{href:t,...a,children:n})}let L=(0,l.memo)(function(e){let{markdown:t}=e,{theme:n,setTheme:a,resolvedTheme:l}=(0,v.F)(),r={backgroundColor:S.L5,padding:"3px",borderRadius:"8px",color:"white",cursor:"pointer"},o={backgroundColor:"white",padding:"3px",borderRadius:"8px",color:"black",cursor:"pointer"};return(0,s.jsx)(j.D,{remarkPlugins:[N.Z,k.Z],rehypePlugins:[y.Z,[y.Z,F]],className:"fs-5",components:{p:e=>{let{node:t,...n}=e;return(0,s.jsx)("p",{className:"text-black mb-2 text-break",...n})},ul:e=>{let{node:t,...n}=e,a={...n,ordered:"false"};return(0,s.jsx)("ul",{className:"mb-3",...a})},ol:e=>{let{node:t,...n}=e,a={...n,ordered:"true"};return(0,s.jsx)("ol",{className:"mb-2",...a})},a:FootnoteLink,code(e){let{node:t,inline:n,className:a,children:i,style:c,...d}=e;return n?(0,s.jsx)("code",{onClick:()=>{navigator.clipboard.writeText(String(i))},className:a,style:"dark"===l?o:r,...d,children:i}):(0,s.jsx)(C.Z,{highlighterProps:d,url:"",className:a,children:String(i)})}},children:t})}),errorMessage=e=>(0,s.jsxs)("p",{children:["The inference service may be temporarily unavailable - we have alerts for this and will be fixing it soon.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can try the regenerate button in a few moments.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"If your query still does not work, you can try searching this on"," ",(0,s.jsx)("a",{href:"https://www.google.com/search?q=".concat(encodeURIComponent(e)),children:"Google"})," ","or"," ",(0,s.jsx)("a",{href:"https://www.duckduckgo.com?q=".concat(encodeURIComponent(e)),children:"DuckDuckGo"}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can also prefix your question with !g or !ddg"," ",(0,s.jsx)(d(),{href:"/bangs",children:"shortcuts"}),". You may have to enable popups for this to work."]});FootnoteLink.defaultProps={href:""};var components_AnswerPanel=function(e){var t;let{question:n,waitingForStreamStart:a,answer:l,searchResults:r,doneStreaming:o,metadata:i}=e,c=null==i?void 0:i.model_name,d=null==i?void 0:i.mode,h="Answer";return c&&(h+=" | ".concat(c," Model")),void 0!==d&&"Normal"!==d&&(h+=" | ".concat(d)),(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"text-uppercase mt-1",children:h}),(0,s.jsx)(R,{images:null==i?void 0:i.images}),a&&_,a&&_,a&&_,!a&&(null!==(t=(e=>{if(!e)return null;let t=r.map(e=>e.url),formatParagraph=(e,n)=>{let s=e;o||(s=s.replace(f.yV,"[".concat(f.qz,"](#loading)"))),s=(s=(0,f.Yg)(s,t)).replace(f.V7,(e,t)=>r?"".concat(t):"");let a=/\$(?=\d+)/g,l=s.split(/(`[^`]*`)/g);l.forEach((e,t)=>{e.startsWith("`")||(l[t]=e.replace(a,"\\$"))}),s=l.join("");let i=s.match(f.x);if(n&&i&&i.length>0){let e=i[i.length-1];"`"===e?s=s.substring(0,s.length-1):e.split("`").length<3&&(s+="`")}return n&&s.endsWith("[")&&(s=s.substring(0,s.length-1)),s},formatCodeBlock=e=>e.replace(f.PT,(e,t)=>e[0]),n=e.split("```");return n.map((e,t)=>{let a=!o&&t===n.length-1;if(t%2!=0){let n=formatCodeBlock(e),l=a&&!n.endsWith("\n");return(0,s.jsx)(L,{markdown:"```".concat(n).concat(l?"\n":"","```")},t)}return e.trimStart().split("\n\n").map((e,t)=>(0,s.jsx)(L,{markdown:formatParagraph(e,a)},t))})})(l))&&void 0!==t?t:errorMessage(n))]})},H=n(7907),components_PaginationButtons=function(e){let{pageIndex:t,setPageIndex:n,numPages:a}=e,l=Array.from(Array(a).keys());return(0,s.jsx)("ul",{className:"pagination pagination-sm mb-0",children:l.map((e,a)=>(0,s.jsx)("li",{className:"page-item ".concat(t===a?"active":""),children:(0,s.jsx)("button",{className:"page-link btn-pagination",onClick:()=>n(a),type:"button",children:a+1})},a))})},Z=(0,l.memo)(function(e){var t,n;let{searchResults:a,loading:r,openLinksInNewTab:o,customLinks:i}=e,[c,d]=(0,l.useState)(0),{isXs:h,isSm:u,isMd:m}=(0,D.k)(),[x,p]=(0,l.useState)(!1),g=h||u||m?4:5,b=h?1:5,w=Array.from(Array(b).keys()).map(e=>(0,s.jsxs)("div",{className:"mb-6 placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-6"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-11"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-10"})]},"placeholder ".concat(e))),j=[];for(let e=0;e<a.length;e+=g)j.push(a.slice(e,e+g));if(i.length>0){let e=i.map((e,t)=>({title:"Custom Link ".concat(t),url:e,description:"Your custom link."}));j=[e,...j]}return(0,s.jsxs)("div",{className:"position-relative mt-5",children:[(0,s.jsx)("h6",{className:"text-uppercase d-inline p-0",children:"Sources"}),r&&w,!r&&!(null==j?void 0:j.length)&&(0,s.jsx)("p",{children:"There were no search results found."}),(0,s.jsx)("div",{className:"row",children:c<j.length&&(null===(t=j[c])||void 0===t?void 0:t.slice(0,x?void 0:g).map((e,t)=>(0,f.jv)(e.url)?(0,s.jsx)("div",{className:"".concat(h||u||m?"col-6":""),children:(0,s.jsx)(H.Z,{openLinksInNewTab:o,index:t,webResult:e,pageIndex:c})},e.url):null))}),(h||u||m)&&!x&&(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 pt-0 pb-2 btn-no-border lift",onClick:()=>p(!0),children:[(0,s.jsx)("i",{className:"fe fe-plus-circle me-2"}),"Show more sources"]})}),!r&&(!(h||u||m)||(h||u||m)&&x)&&(0,s.jsx)("div",{className:"row mt-2",children:(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(components_PaginationButtons,{pageIndex:c,setPageIndex:d,numPages:null!==(n=null==j?void 0:j.length)&&void 0!==n?n:0})})})]})}),q=n(7895),G=n(93680),U=n(52641),components_FeedbackModal=function(e){let{show:t,setShow:n,sendFeedback:a,currentFeedback:l}=e,handleClose=()=>n(!1),r=!1===l?"What was the issue? How can it be improved?":"What do you like about the response?";return(0,s.jsx)(T.Z,{show:t,onHide:handleClose,children:(0,s.jsx)(T.Z.Body,{className:"bg-light rounded-1 container",children:(0,s.jsxs)(U.Z,{onSubmit:e=>{let t={helpful:l};for(let n=0;n<e.target.elements.length;n+=1)"checkbox"===e.target.elements[n].type&&(t[e.target.elements[n].id]=e.target.elements[n].checked),"textarea"===e.target.elements[n].type&&(t.comment=e.target.elements[n].value);a(t,"Feedback Form"),handleClose(),e.preventDefault()},children:[(0,s.jsxs)(U.Z.Group,{className:"m-1 mb-5",controlId:"exampleForm.ControlTextarea1",children:[(0,s.jsx)("h4",{children:r}),(0,s.jsx)(U.Z.Control,{className:"bg-white",as:"textarea",type:"textarea",rows:3})]}),!1===l&&(0,s.jsxs)(U.Z.Group,{className:"m-1 mb-5",controlId:"formBasicCheckbox",children:[(0,s.jsx)(U.Z.Check,{type:"checkbox",label:"Answer isn't true",id:"inaccurate"}),(0,s.jsx)(U.Z.Check,{type:"checkbox",label:"Answer is incomplete",id:"tooShort"}),(0,s.jsx)(U.Z.Check,{type:"checkbox",label:"I waited too long",id:"tooSlow"})]}),(0,s.jsxs)("p",{className:"m-1 p-1",children:["Have more feedback?"," ",(0,s.jsx)("a",{href:S.tP,children:"Join our discord"})]}),(0,s.jsx)(G.Z,{className:"m-1 rounded-1 btn-sm",variant:"secondary",onClick:handleClose,children:"Close"}),(0,s.jsx)(G.Z,{className:"m-1 rounded-1 btn-sm",variant:"primary",type:"submit",children:"Submit"})]})})})},components_RegenerateFeedback=function(e){let{sendFeedback:t}=e,{isXs:n}=(0,D.k)();return(0,s.jsx)("div",{className:"alert bg-light alert-dismissible fade show p-3",role:"alert",children:(0,s.jsxs)("div",{className:n?"container justify-content-center d-flex text-center":"container d-flex",style:n?{flexWrap:"wrap"}:{},children:[(0,s.jsx)("div",{className:"flex-grow-1 align-self-center",children:(0,s.jsx)("strong",{children:"Was this response better or worse?"})}),(0,s.jsxs)("div",{className:n?"row":"",children:[(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("better"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"}),"Better"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("worse"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"}),"Worse"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("same"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-minus-circle m-2"}),"Same"]})]})]})})};function ShareMenu(e){let{question:t,currentAnswer:n,conversationContent:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-share m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Share "}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Link For Sharing"]})}),n&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(n)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy this Answer"]})}),a&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(a)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Conversation"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{let e="https://twitter.com/intent/tweet?text=Phind Search: ".concat(encodeURIComponent(t),"&url=").concat(encodeURIComponent(window.location.href));window.open(e,"_blank")},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-twitter m-1",viewBox:"0 2 16 16",children:(0,s.jsx)("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})}),"Twitter"]})})]})]})}ShareMenu.defaultProps={currentAnswer:"",conversationContent:""};var W=(0,l.memo)(ShareMenu),B=(0,l.memo)(function(e){let{suggestedFollowups:t,customSearchHandler:n}=e,[a,r]=(0,l.useState)(!0),handleClick=async(e,t)=>{e.preventDefault(),n&&n(t,""),w.n.track("Click Suggested Followup",{prompt:t})},{isXs:o,isSm:i,isMd:c}=(0,D.k)();return(0,s.jsxs)("div",{className:(o||i||c)&&(null==t?void 0:t.length)?"mt-5 mb-6":"my-5",children:[!!(null==t?void 0:t.length)&&(0,s.jsx)("a",{onClick:()=>r(e=>!e),style:{cursor:"pointer"},children:(0,s.jsxs)("h6",{className:"text-uppercase mt-1",children:["Suggestions",(0,s.jsx)("i",{className:"fe fe-chevron-".concat(a?"up":"down")})]})}),!!(null==t?void 0:t.length)&&a&&t.slice(0,o?3:t.length).map(e=>(0,s.jsx)(p.E.a,{onClick:t=>handleClick(t,e),initial:{opacity:0},animate:{opacity:1},children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start ms-0 me-2 rounded-1",children:e})},e))]})}),O=n(50897),z=(0,l.memo)(function(e){let{regenerateAnswer:t,answerIndex:n,requestsLeftForGPT4:a,session:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 btn-no-border dropdown dropdown-toggle lift","data-bs-toggle":"dropdown","aria-expanded":"false",children:[(0,s.jsx)("i",{className:"fe fe-refresh-cw me-2"}),"Rewrite"]}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Rewrite your answer "}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,void 0,"Phind Model")},children:"Use Phind Model"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,void 0,"GPT-4")},children:"Use GPT-4"})}),(0,s.jsx)("li",{children:(0,s.jsxs)("p",{className:"mt-5 mb-0 fs-6 text-break",children:[(0,s.jsxs)("span",{className:"text-primary",children:[Math.max(a,0)," ","GPT-4 uses left",l&&" today","."]}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-always-dark",children:"Phind Model has unlimited uses."}),!l&&a<=0&&(0,s.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{w.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses."}),l&&a<=0&&(0,s.jsx)(d(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily GPT-4 model uses."})]})})]})]})}),K=n(12074),Q=n(81722),V=n(51479);function MastheadSearchbox(e){let{placeholder:t,initialQuestionFromCache:n,defaultNumRowsToShow:a,customSearchHandler:r,children:o,initialContext:i,loading:c,answerModel:d,setAnswerModel:h,setSearchBoxHasText:u,maxTokenLimit:x=S.M9,canUseGPT4:p=!1}=e,[g,b]=(0,l.useState)(n),[j,v]=(0,l.useState)(i),[N,y]=(0,l.useState)(!!i),[k,C]=(0,l.useState)(""),[A,T]=(0,l.useState)(!1),[E,M]=(0,l.useState)(0),[R,_]=(0,l.useState)(!1),{data:F}=(0,m.useSession)(),L=(0,l.useRef)(null),H=(0,l.useRef)(null);function resizeTextArea(e){if(null==e?void 0:e.current){let t=e.current;t.style.height="auto";let n=Math.min(t.scrollHeight,512);t.style.height="".concat(n,"px")}}(0,l.useEffect)(()=>{resizeTextArea(L),resizeTextArea(H),u(g.length>0)},[L,g,H,j]);let handleKeyDown=e=>{"Tab"===e.key&&y(!0),e.shiftKey&&"Enter"===e.key||"Enter"!==e.key||(e.preventDefault(),handleSubmit(e))},handleSubmit=async e=>{if(e.preventDefault(),c)return;let t=g.trim(),n=j?"&c=".concat(encodeURIComponent(j)):"";if(""!==t){if(Z>=S.$x){let e=(0,f.yF)(t,x,d),n=(0,f.yF)(j,x-(0,f.In)(e,d),d);localStorage.setItem("long-question",e),localStorage.setItem("long-context",n)}w.n.track("Searchbox Submit",{question:t,context:j}),r?await r(t,j,k):Z>=S.$x?window.location.href="/search?source=searchbox&long=true":window.location.href="/search?q=".concat(encodeURIComponent(g)).concat(n,"&source=searchbox")}},handleFileChange=e=>{var t;h("GPT-4");let n=null==F?void 0:null===(t=F.user)||void 0===t?void 0:t.userId;if(!n){console.error("User token not found");return}let s=new FormData;s.append("file",e);let a=new XMLHttpRequest,l=(0,S.MJ)();a.open("POST","".concat(l,"/upload_file/"),!0),a.setRequestHeader("Authorization",n),a.upload.onprogress=function(e){if(e.lengthComputable){let t=Math.round(e.loaded/e.total*100);M(t),_(!0)}},a.onload=function(){if(200===a.status){let e=JSON.parse(a.responseText);C(e.url),_(!1)}else console.error("Upload failed");M(0)},a.send(s),w.n.track("Image Uploaded")},Z=g.length+j.length,q=(0,f.In)("".concat(g,"\n").concat(j),d),{isXs:G}=(0,D.k)(),U=G?"on":"off",W=["JPG","jpg","JPEG","jpeg","PNG","png","GIF","gif","webp","WEBP"],B=(0,s.jsxs)("form",{className:"mb-3",onSubmit:e=>handleSubmit(e),children:[(0,s.jsxs)("div",{className:"shadow darkmode-light position-relative search-bar-input-group container px-1 m-0",children:[(0,s.jsx)("textarea",{tabIndex:0,ref:L,autoFocus:!0,autoComplete:"off",autoCorrect:U,autoCapitalize:"off",spellCheck:"false",name:"q",className:"form-control bg-white darkmode-light searchbox-textarea search-bar-hide-scrollbar fs-5 px-2 pt-2 pb-0 my-1 mx-0 row",rows:a,placeholder:t,"aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:handleKeyDown,onChange:e=>{let t=e.target.value;b(t),t.length>=256&&y(!0)},value:g}),(0,s.jsx)(O.Z,{show:A,setShow:T}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-8 d-flex justify-content-start",children:o}),(0,s.jsxs)("div",{className:"col-4 d-flex justify-content-end",children:[(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm fs-6 px-2 pb-2 ".concat(q>=x?"text-danger":"darkmode-light"),style:{width:q<256?"7em":"auto",visibility:q>256?"visible":"hidden"},children:[q," tokens ",q>=x&&"(will truncate)"]}),(0,s.jsx)(P.Z,{message:"Add context",children:(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),j||y(!N)},children:[" ",(0,s.jsx)("i",{className:"fe fe-code ".concat(0===g.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,s.jsx)(P.Z,{message:"Upload image",children:p?(0,s.jsx)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault()},children:(0,s.jsxs)(Q.b,{handleChange:handleFileChange,maxSize:20,types:W,children:[" ",(0,s.jsx)("i",{className:"fe fe-image ".concat(0===g.length?"masthead-textbox":"darkmode-light"),style:{cursor:"pointer"}})," "]})}):(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),T(!0)},children:[" ",(0,s.jsx)("i",{className:"fe fe-image ".concat(0===g.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,s.jsxs)("button",{type:"submit",className:"btn btn-sm mx-1 rounded-1 fs-5 p-1 lift ".concat(""),children:[" ",(0,s.jsx)("i",{className:"fe fe-search ".concat(0===g.length?"masthead-textbox":"darkmode-light")})," "]})]})]})]}),N&&(0,s.jsx)("div",{className:"shadow darkmode-light mt-5 rounded-1",children:(0,s.jsx)("textarea",{tabIndex:0,ref:H,autoComplete:"off",autoCorrect:U,autoCapitalize:"off",spellCheck:"false",name:"c",className:"form-control bg-white darkmode-light searchbox-textarea fs-5 m-1 p-2 rounded-1",rows:a,placeholder:"Put any extra code or context here.","aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:handleKeyDown,onChange:e=>{v(e.target.value)},value:j})}),R&&(0,s.jsx)("div",{className:"mt-5",children:(0,s.jsx)(V.Z,{now:E,label:"".concat(E,"%")})}),k&&(0,s.jsx)("div",{style:{height:"250px",position:"relative"},children:(0,s.jsx)(I(),{src:k,className:"mt-5",layout:"fill",objectFit:"contain",alt:"The image you uploaded.",unoptimized:!0})})]});return p?(0,s.jsx)(Q.b,{onDrop:handleFileChange,maxSize:20,types:W,disabled:!0,children:B}):B}MastheadSearchbox.defaultProps={customSearchHandler:null,children:null,loading:!1,maxTokenLimit:S.M9};var J=n(92218),X=(0,l.memo)(function(){let[e,t]=(0,l.useState)(!1);if((0,l.useEffect)(()=>t(!0),[]),!e)return null;let trackClick=e=>{w.n.track("Click Explore Card",{prompt:e})},n=(0,f.TV)(S.A),a=n.slice(0,4);return(0,s.jsx)("div",{className:"m-0",children:(0,s.jsx)("div",{className:"container col-10",children:(0,s.jsx)("div",{className:"mt-6 p-2 text-center",children:a.map(e=>(0,s.jsx)("a",{href:"/search?q=".concat(encodeURIComponent(e)),onClick:()=>trackClick(e),children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start py-1 px-2 rounded-1",children:e})},e))})})})}),Y=n(51565);function Masthead(e){var t;let{isValidProPlan:n,numRequestsDone:a,planName:r,planNotExpired:o,isLoggedIn:i,customSearchHandler:c,answerModel:h,setAnswerModel:u}=e,[x,p]=(0,q.Z)("useCreativeMode",!1),{headerHeight:g}=(0,Y.g)(),{data:b}=(0,m.useSession)(),[j]=(0,q.Z)("numNotLoggedInRequestsDone",0),v=b?(0,f.N7)(r,o)-a:S.BH-j,[N,y]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>y(!0),[]);let A=n||o&&"Phind Free"!==r,T=(0,s.jsx)(s.Fragment,{children:"Your AI search engine and pair programmer."}),{isXs:E}=(0,D.k)(),M=n?S.CZ:S.M9,R="Phind Model"===h||"GPT-4"===h&&v<=0?S.c5:M,_=null!==(t=b&&v>0)&&void 0!==t&&t,F=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Sign in to keep your answer history."," ",(0,s.jsx)("a",{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",onClick:()=>{(0,m.signIn)().then(()=>{w.n.track("Sign In")})},children:"Sign in"})]}),L=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Have questions, feature requests, or bugs reports?"," ",(0,s.jsx)("a",{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",href:S.tP,children:"Join our Discord Community"})]}),H=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get answers directly in VSCode."," ",(0,s.jsx)("a",{href:S.Vt,className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",children:"Try the Phind Extension"})]}),Z=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get faster answers, longer context, image uploads, and access to GPT-4."," ",(0,s.jsx)(d(),{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",href:"/plans",onClick:()=>{w.n.track("Click Upgrade to Pro",{from:"Masthead"})},children:"Try Phind Pro"})]}),G=[];return(G=i?i&&!A?[Z]:[L,H]:[F,L,H],N)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"row justify-content-center",children:[(0,s.jsxs)("div",{className:"col-10",children:[!E&&(0,s.jsx)("h1",{className:"display-4 text-center",style:{visibility:"hidden",height:0},children:T}),(0,s.jsx)("h1",{className:"display-4 mb-8 text-center mt-5",children:(0,s.jsx)(d(),{href:"/search?home=true",children:(0,s.jsx)(I(),{className:"img-fluid darkmode-img",width:187.5,height:65,src:"/images/phind_v2.svg",alt:"...",style:{maxWidth:"100%",height:"auto"},priority:!0})})})]}),(0,s.jsx)("div",{className:"col-lg-8 col-md-8 col-10",children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)(MastheadSearchbox,{placeholder:E?"Ask anything.":"Ask anything. What are you stuck on?",initialQuestionFromCache:"",initialContext:"",defaultNumRowsToShow:2,answerModel:h,setAnswerModel:u,maxTokenLimit:R,customSearchHandler:c,setSearchBoxHasText:C,canUseGPT4:_,children:(0,s.jsx)(P.Z,{message:"Select your preferred answering model.",children:(0,s.jsx)(J.Z,{answerModel:h,setAnswerModel:u,requestsLeftForGPT4:v,session:b,useCreativeMode:x,setUseCreativeMode:p,searchBoxHasText:k,isOnMasthead:!0})})})})})]}),N&&!i&&!E&&(0,s.jsx)(X,{}),(0,f.TV)(G)[0],(0,s.jsx)("div",{style:{height:g,transition:"height ".concat(S.Qs," linear")}})]}):null}function TimingDisplay(e){var t;let{timing:n,start:a,scalingFactor:l}=e;return(0,s.jsx)("div",{style:{display:"block",color:"white"},children:(0,s.jsxs)("div",{style:{display:"block",width:((null!==(t=n.end)&&void 0!==t?t:Date.now()/1e3)-n.start)/l,marginLeft:(n.start-a)/l,background:"rgba(0, 255, ".concat(n.children.length>0?255:0,", 0.3)"),outline:n.children.length>0?"1px solid white":"none",whiteSpace:"nowrap"},title:n.indicator,children:[(0,s.jsxs)("div",{style:{outline:n.children.length>0?"1px solid white":"none"},children:[n.indicator,(0,s.jsxs)("i",{style:{color:"rgba(255, 255, 255, 0.7) "},children:[" (",null!==n.end?"".concat(Math.round((n.end-n.start)*1e3).toLocaleString()," ms"):"running...",")"]})]}),n&&n.children&&n.children.length>0&&(0,s.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.2)",display:"block"},children:n.children.sort((e,t)=>e.start-t.start).map(e=>(0,s.jsx)(TimingDisplay,{timing:e,start:n.start,scalingFactor:l},e.id))})]})})}function DebugInfo(e){let{serverIndicatorTiming:t,backendDelay:n,setShowDebugInfo:a}=e,[r,o]=(0,l.useState)(.005);return(0,s.jsxs)("div",{className:"p-4 mx-5 mb-5 border border-secondary rounded",children:[(0,s.jsxs)("div",{className:"d-flex flex flex-row",children:[(0,s.jsx)("span",{children:"Debug info"}),(0,s.jsx)("span",{style:{flex:1}}),(0,s.jsx)("i",{className:"fe fe-x ms-2",style:{cursor:"pointer"},onClick:()=>{a(!1)}})]}),(0,s.jsx)("hr",{}),void 0===t?"No debug info available":(0,s.jsxs)(s.Fragment,{children:["Waiting for backend:"," ",Math.round(n).toLocaleString(),"ms",(0,s.jsx)("div",{style:{overflowX:"scroll",background:"black"},children:(0,s.jsx)(TimingDisplay,{timing:t,start:t.start,scalingFactor:r})}),"Scale",(0,s.jsx)("input",{type:"range",min:1,max:400,step:1,value:1/r,onChange:e=>o(1/parseFloat(e.target.value))})]})]})}Masthead.defaultProps={isValidProPlan:!1,isLoggedIn:!1,customSearchHandler:void 0};let $={question:"",searchResults:[],answer:"",context:"",previousAnswers:[],customLinks:[],metadata:{}},ee="/search?home=true";function Search(e){let{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u}=e,m=(0,i.useRouter)(),p=(0,l.useRef)(ee),[g,f]=(0,l.useState)((0,x.Mc)());return(0,l.useEffect)(()=>{m.asPath===ee&&p.current!==m.asPath&&f((0,x.Mc)()),p.current=m.asPath},[m.asPath]),(0,s.jsx)(SearchComponent,{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u},g)}function SearchComponent(e){var t,n,r;let{cachedAnswerHistory:c,numRequestsDone:j,phindPlan:v,paidPlanValid:N,anonUserId:y,cachedSuggestedFollowupQuestions:k,chatHistoryEnabled:C,isLoggedIn:A,backendToken:I}=e,T=(0,i.useRouter)(),{isSidebarOpen:E}=(0,K.A)(),{headerHeight:M}=(0,Y.g)(),R=(0,l.useRef)((0,x.Mc)());(0,l.useEffect)(()=>{let handleRouteChange=e=>{(e===ee||e.startsWith("/agent"))&&(R.current=(0,x.Mc)())};return T.events.on("routeChangeStart",handleRouteChange),()=>{T.events.off("routeChangeStart",handleRouteChange)}},[T]);let{query:_}=T,{q:F,cache:L,fromExtension:H,source:G,c:U,long:Q,home:V}=_,{data:J}=(0,m.useSession)(),[X,et]=(0,l.useState)(!1);(0,l.useEffect)(()=>{et(!0)},[]);let[en,es]=(0,l.useState)("true"===V),[ea,el]=(0,l.useState)(void 0),[er,eo]=(0,l.useState)(!1),[ei]=(0,q.Z)("useCreativeMode",!1),ec=(0,l.useRef)(new AbortController),{signal:ed}=ec.current,[eh,eu]=(0,l.useState)(null!=c?c:[]),[em,ex]=(0,l.useState)(null!=k?k:[]),ep=eh.length,eg=null==eh?void 0:eh.map(e=>e.question),ef=null==eg?void 0:eg[0],eb=null==eg?void 0:eg.slice(-1)[0],ew=null==eh?void 0:null===(t=eh.slice(-1)[0])||void 0===t?void 0:t.context,[ej,ev]=(0,l.useState)(),[eN,ey]=(0,l.useState)(0),[ek,eS]=(0,q.Z)("phindDebugMode",!1);(0,l.useEffect)(()=>{let handleKeyDown=e=>{"1"===e.key&&e.shiftKey&&e.metaKey&&(eS(e=>!e),e.preventDefault())};return window.addEventListener("keydown",handleKeyDown),()=>{window.removeEventListener("keydown",handleKeyDown)}},[]);let[eC,eP]=(0,q.Z)("numNotLoggedInRequestsDone",0),eA=100;X&&(J?eA=(0,f.N7)(v,N)-j:null===J&&(eA=S.BH-eC));let[eI,eT]=(0,q.Z)("answerModel",S.Wg),eD=("Phind Pro"===v||"Phind Pro Yearly"===v)&&N,eE="Phind Model"===eI||"GPT-4"===eI&&eA<=0,eM=eD?S.CZ:S.M9,eR=eE?S.c5:eM,e_=Q&&window.localStorage,eF=e_&&localStorage.getItem("long-question")||"",eL=e_&&localStorage.getItem("long-context")||"",eH=null!==(n=null!=F?F:eF)&&void 0!==n?n:"",eZ=null!==(r=null!=U?U:eL)&&void 0!==r?r:"",[eq,eG]=(0,l.useState)(Array(ep).fill(!1)),[eU,eW]=(0,l.useState)(Array(ep).fill(!1)),[eB,eO]=(0,l.useState)(Array(ep).fill(!0)),[ez,eK]=(0,l.useState)(null),[eQ,eV]=(0,l.useState)(!1),[eJ,eX]=(0,l.useState)(-1),[eY,e$]=(0,l.useState)(!1),[e0,e1]=(0,l.useState)(Array(ep).fill(!1)),e5={},e2=new Date,e6=e2.toLocaleDateString(),e3="";e3=window.navigator.language;let{isXs:e8}=(0,D.k)(),{isMd:e4}=(0,D.k)(),{isSm:e7}=(0,D.k)(),e9={date:e6,language:e3,detailed:!0,anonUserId:y,answerModel:eI,creativeMode:ei},firstSearchHandler=(e,t,n)=>{R.current=(0,x.Mc)();let s=e;(0,f.In)(e,n)>eR&&(s=(0,f.yF)(e,eR,n));let a={...$,question:s,context:t};eu([a]),eG([!0]),eW([!0]),eu(e=>(0,f.N6)(e,0,{...a,checkedQuestion:s})),performSearch(0,s,t),es(!1)},handleStopGenerating=()=>{ec.current.abort(),ec.current=new AbortController,eW(e=>e.map(()=>!1)),eO(e=>e.map(()=>!0))};(0,l.useEffect)(()=>{let handleEsc=e=>{"Escape"===e.key&&handleStopGenerating()};return window.addEventListener("keydown",handleEsc),()=>{window.removeEventListener("keydown",handleEsc)}},[]);let removeAnswer=async e=>{var t;(null===(t=window)||void 0===t?void 0:t.confirm("Are you sure you want to remove this answer?"))&&(w.n.track("Click Remove Answer",{answer:eh[e]}),eu(t=>{var n;let s=t.filter((t,n)=>n!==e),a=null===(n=s.slice(-1)[0])||void 0===n?void 0:n.question;if(!C)return s;let l=null!=L?L:void 0;return l&&(0===s.length?(0,b.do)([l]).then(()=>{T.push(ee)}):(0,b.tI)(l,a,s)),s}))},trackSearchEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feedback",n={question:eb,context:ew,source:H?"extension":G,answerCount:eh.length,options:e9,searchOptions:e5,phindPlan:v};w.n.track(t,{...n,...e})},regenerateAnswer=(e,t,n,s)=>{if(e>=eh.length){console.error("Answer index out of bounds");return}let a=eh[e],l=t||eb;w.n.track("Regenerate Answer",{question:l,previousAnswerData:a,answerIndex:e});let{searchResults:r}=a,o=r;n&&r&&(o=r.filter((e,t)=>n[t]));let{previousAnswers:i}=a,c=(0,f.N6)(eh,e,{...a,searchResults:o,question:l,previousAnswers:[...i,a.answer]});eu(c);let d={...e9,regenerate:!0};s&&(d={...d,answerModel:s}),generateAnswer(e,c,d),(null==a?void 0:a.answer)&&eX(e)},[te,tt]=(0,l.useState)(!1),fetchFollowupSearchResults=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ep,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(te)return;tt(!0),ex(e=>(0,f.N6)(e,n,[]));let l={...$,question:e,context:t};eu(e=>(0,f.N6)(e,n,l)),eG(e=>(0,f.N6)(e,n,!0)),eW(e=>(0,f.N6)(e,n,!0)),u.OK.scrollTo("answer-".concat(n),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110}),performSearch(n,e,t,s,a),tt(!1)};(0,l.useEffect)(()=>{0===eA&&!eY&&"GPT-4"===eI&&X&&e$(!0)},[eA,X]),(0,l.useEffect)(()=>{if(X&&window.localStorage&&T&&T.isReady&&!V&&!L){if(eH)0===eh.length&&firstSearchHandler(eH,eZ,eI)}},[F,T,X]);let[tn,ts]=(0,l.useState)(!1),performSearch=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(""===t)return;let l=[],r=t.match(/(?:^|\s)(https?:\/\/\S+)(?:\s|$)/g);r&&r.forEach(e=>{let t=e.trim();!(t.includes("127.0.0")||t.includes("localhost"))&&(l.includes(t)||l.push(t))});let o=(0,f.hC)(t);ts(o);let i=(0,f.xs)(t);if(i){window.open(i,"_self","noopener,noreferrer");return}let c={...$,question:t,context:n};eu(t=>(0,f.N6)(t,e,c)),eG(t=>(0,f.N6)(t,e,!0)),eW(t=>(0,f.N6)(t,e,!0)),(t=>{let n=(0,f.N6)(eh,e,t);eu(n),s&&eu(e=>e.slice(0,a+1));let r=ei?e9:{...e9,customLinks:l};o||generateAnswer(e,n,r)})(c)},copyAnswer=e=>{let{answer:t}=eh[e],n=(0,f.N6)(e0,e,!0);e1(n),w.n.track("Click Copy Answer",{answer:t}),navigator.clipboard.writeText(t)},generateAnswer=function(e,t){let n,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e9,r=R.current,o=new Map;if(ev(n),ex(t=>(0,f.N6)(t,e,[])),!1===eB[e]){console.warn("Did not start new stream as previous stream is still running.");return}let i=-1,c=-1,d=Date.now();eW(t=>(0,f.N6)(t,e,!0)),eO(t=>(0,f.N6)(t,e,!1)),eK(null);let{question:m,context:x}=t[e],p=e>=1;if(p){let n=t.slice(0,e).map(e=>"".concat(e.question,"\n").concat(e.context)),a=t.slice(0,e).map(e=>e.answer);s=(0,b.iK)(m,n,a,x,l,I,ea)}else s=(0,b.tA)(m,x,l,I,ea);J||"GPT-4"!==eI||eP(e=>e+1),s.then(async t=>{let s="",l={},x=!0,p=(0,h.j)(t=>{if(r!==R.current){console.warn("Answer UUID changed, ignoring event");return}if("event"===t.type){let{data:p}=t;if(x&&(ey(c=Date.now()-d),0!==e&&u.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110})),x=!1,p.includes("<PHIND_SPAN_BEGIN>")){let e=p.replace("<PHIND_SPAN_BEGIN>","").replace("</PHIND_SPAN_BEGIN>",""),t=JSON.parse(e);if(o.set(t.id,t),t.parent){var h;null===(h=o.get(t.parent))||void 0===h||h.children.push(t),ev({...n})}else n=t,ev({...t})}else if(p.includes("<PHIND_SPAN_END>")){let e=p.replace("<PHIND_SPAN_END>","").replace("</PHIND_SPAN_END>",""),t=JSON.parse(e),s=o.get(t.id);s&&(s.end=t.end),ev({...n})}else if(p.includes("<PHIND_BACKEND_ERROR>"))eW(t=>(0,f.N6)(t,e,!1)),eO(t=>(0,f.N6)(t,e,!0)),a.uT("Backend error: ".concat(p));else if(p.includes("<PHIND_FOLLOWUP>")){let t=p.replace("<PHIND_FOLLOWUP>","").replace("</PHIND_FOLLOWUP>",""),n=JSON.parse(t);ex(t=>{let s=[...t[e],n];return(0,f.N6)(t,e,s)})}else if(p.includes("<PHIND_DONE/>")){if(eO(t=>(0,f.N6)(t,e,!0)),r!==R.current){console.warn("Answer UUID changed, ignoring answer"),console.log(r,R.current),w.n.track("Search Cancelled by Navigating Away",{question:m,awayPath:window.location.pathname});return}if(eO(t=>(0,f.N6)(t,e,!0)),"/search"!==window.location.pathname){w.n.track("Search Cancelled by Navigating Away",{question:m,awayPath:window.location.pathname});return}eu(t=>{let a={...t[e],answer:s,metadata:l},r=(0,f.N6)(t,e,a);return finishGeneratingAnswer(e,r,d,c,i,n,l),r})}else if(p.includes("<PHIND_METADATA>")){let t=p.replace("<PHIND_METADATA>","").replace("</PHIND_METADATA>",""),n=JSON.parse(t);l={...l,...n},eu(t=>(0,f.N6)(t,e,{...t[e],metadata:{...t[e].metadata,...n}}))}else if(p.includes("<PHIND_WEBRESULTS>")){let t=JSON.parse(p.replace("<PHIND_WEBRESULTS>","").replace("</PHIND_WEBRESULTS>",""));if(eG(t=>(0,f.N6)(t,e,!1)),!t||t.length<=0)return;eu(n=>(0,f.N6)(n,e,{...n[e],searchResults:t}))}else eW(t=>(0,f.N6)(t,e,!1)),s+=p,eu(t=>(0,f.N6)(t,e,{...t[e],answer:s})),-1===i&&(i=Date.now())}}),g=t.body,b=(0,f.Mz)(g,ed);for await(let e of(0,f.Uj)(b)){let t=new TextDecoder().decode(e);p.feed(t)}}).catch(t=>{console.error(t),a.Tb(t),eW(t=>(0,f.N6)(t,e,!1)),eO(t=>(0,f.N6)(t,e,!0))})},finishGeneratingAnswer=async(e,t,n,s,a,l,r)=>{var o,i;let c=null!=L?L:void 0,{question:d,answer:h,context:u}=t[e];C&&(c?await(0,b.tI)(c,d,t):c=await(0,b.Qc)(d,t).then(e=>e.json()).then(e=>e.newKey));let m="/search?cache=".concat(c),x="".concat(window.location.origin).concat(m);(null==J?void 0:null===(o=J.user)||void 0===o?void 0:o.userId)&&w.n.identify(null==J?void 0:null===(i=J.user)||void 0===i?void 0:i.userId);let p=(0,f.In)(d,eI),g=(0,f.In)(u,eI),j=(0,f.In)(h,eI),v=Date.now(),N={"Waiting for backend":s},flattenTiming=(e,t)=>{t.end&&(N[e+t.indicator]=(t.end-t.start)*1e3),t.children.forEach(n=>flattenTiming("".concat(e).concat(t.indicator,"/"),n))};flattenTiming("",l),trackSearchEvent({answerIndex:e,answer:h,newCachedUrlLink:x,question:d,context:u,questionLength:d.length,answerLength:h.length,contextLength:u.length,combinedQuestionContextLength:d.length+u.length,questionTokens:p,contextTokens:g,combinedQuestionContextTokens:p+g,answerTokens:j,startWaitingForAnswerTime:n,answerBeginGenerationTime:a,answerFinishTime:v,timeToFirstToken:a-n,timeToAnswer:v-n,timeFirstToLastToken:v-a,tokensPerSecond:j/((v-a)/1e3),mixpanelId:null==r?void 0:r.id,debuggingTime:N},"search"),C&&c&&T.replace({pathname:"/search",query:{cache:c}},void 0,{scroll:!1,shallow:!0})},[ta,tl]=(0,l.useState)(Array(ep).fill(!1));return((0,l.useEffect)(()=>{"/search?home=true"===T.asPath&&es(!0)},[T.asPath]),X)?en?(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsx)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - ".concat(M,"px)"),transition:"height ".concat(S.Qs," linear")},children:(0,s.jsx)(Masthead,{isValidProPlan:eD,numRequestsDone:j,planName:v,planNotExpired:N,isLoggedIn:A,customSearchHandler:(e,t,n)=>{n&&el(n),T.replace({pathname:"/search",query:{q:e,...t&&{c:t}}},void 0,{scroll:!0,shallow:!0})},answerModel:eI,setAnswerModel:eT})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:eb})}),(0,s.jsx)(components_FeedbackModal,{show:eQ,setShow:eV,sendFeedback:trackSearchEvent,currentFeedback:ez}),(0,s.jsx)(O.Z,{show:eY,setShow:e$}),(0,s.jsxs)("div",{className:"container-xl",children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,s.jsx)("div",{children:eA<=0&&"GPT-4"===eI&&(J?(0,s.jsx)(P.Z,{message:"Upgrade to Phind Pro for 500+ daily GPT-4 uses",placement:"bottom",children:(0,s.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily GPT-4 uses"})}):(0,s.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{w.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses"}))})})}),eh.map((e,t)=>{let{question:n,searchResults:a,answer:l,customLinks:r,metadata:o,context:i}=e,c="".concat(n,"-").concat(t),d=t===eh.length-1,h=n.length>150?"".concat(n.slice(0,150),"..."):n;return(0,s.jsxs)("div",{style:{minHeight:d?"calc(100vh - ".concat(M,"px)"):0},children:[(0,s.jsx)("div",{className:"pt-6 pb-1",children:(0,s.jsx)("hr",{className:"separator my-0"})}),(0,s.jsxs)(u.W_,{name:"answer-".concat(t),className:"row",children:[(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:eB[t]||eU[t]?(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",style:{visibility:"hidden"},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]}):(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",onClick:()=>{w.n.track("Stop Generating",{question:n}),handleStopGenerating()},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]})}),(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,s.jsxs)("div",{className:"mb-0",children:[!ta[t]&&(0,s.jsx)(P.Z,{message:"Edit Question",children:(0,s.jsx)("span",{className:n!==h?"fs-5 mb-3 font-monospace":"fw-bold fs-2 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:()=>{eB[t]&&(w.n.track("Click Edit Question",{question:n,answerIndex:t}),tl(e=>(0,f.N6)(e,t,!0)))},children:er?n:h})}),ta[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.Z,{placeholder:"Edit your question.",initialQuestionFromCache:n,initialContext:i,defaultNumRowsToShow:1,customSearchHandler:(e,n)=>{fetchFollowupSearchResults(e,n,t,!0,t),tl(e=>(0,f.N6)(e,t,!1))},answerModel:eI,maxTokenLimit:eR})}),(0,s.jsx)("button",{className:"btn btn-no-border lift ms-n2 btn-sm",type:"button",onClick:()=>{tl(e=>(0,f.N6)(e,t,!1))},children:"Cancel"})]}),t>0&&n!==h?(0,s.jsx)(P.Z,{message:"Show Full Question",children:(0,s.jsx)("i",{className:er?"fe fe-chevron-up":"fe fe-chevron-down",onClick:()=>{eo(!er)}})}):null]})}),(e8||e7||e4)&&(0,s.jsx)("div",{className:tn?"col-lg-8 col-xl-7":"col-lg-4 col-xl-4",children:(0,s.jsxs)("div",{className:"container-xl web-container p-0 ms-0",children:[!eB[t]&&(0,s.jsx)(Z,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eq[t]}),eB[t]&&(0,s.jsx)(Z,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eq[t]})]})}),ek&&d&&(0,s.jsx)(DebugInfo,{backendDelay:eN,serverIndicatorTiming:ej,setShowDebugInfo:eS}),!tn&&(0,s.jsxs)("div",{className:"col-lg-8 col-xl-8 mt-5",children:[(0,s.jsxs)("div",{className:"",children:[eB[t]&&(0,s.jsx)(components_AnswerPanel,{question:n,answer:l,waitingForStreamStart:eU[t],searchResults:a,doneStreaming:eB[t],metadata:o}),!eB[t]&&(0,s.jsx)(components_AnswerPanel,{question:n,answer:l,waitingForStreamStart:eU[t],searchResults:a,doneStreaming:eB[t],metadata:o})]}),!eU[t]&&eB[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-n2 mb-4",children:[eJ===t&&(0,s.jsx)(components_RegenerateFeedback,{sendFeedback:e=>{let n=eh[t].previousAnswers.slice(-1)[0];trackSearchEvent({regenerate:e,previousAnswer:n,answer:l},"Regenerate Feedback"),eX(-1)}}),(0,s.jsx)(z,{regenerateAnswer:regenerateAnswer,answerIndex:t,requestsLeftForGPT4:eA,session:J}),(null===ez||!0===ez)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===ez&&(trackSearchEvent({helpful:!0}),eK(!0),eV(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"})}),(null===ez||!1===ez)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===ez&&(trackSearchEvent({helpful:!1}),eK(!1),eV(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"})}),(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>copyAnswer(t),type:"button",children:e0[t]?(0,s.jsx)("i",{className:"fe fe-check text-success mx-2"}):(0,s.jsx)("i",{className:"fe fe-copy mx-2"})}),(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-edit m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" modify "}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{u.OK.scrollTo("answer-".concat(t),{duration:400,delay:0,smooth:"easeInOutQuart",offset:-110}),tl(e=>(0,f.N6)(e,t,!0))},children:[(0,s.jsx)("i",{className:"fe fe-edit m-1"}),"Edit Question"]}),(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>removeAnswer(t),children:[(0,s.jsx)("i",{className:"fe fe-trash m-1"}),"Delete Answer"]})]})]}),(0,s.jsx)(W,{question:ef,currentAnswer:l,conversationContent:eh.map(e=>"## ".concat(e.question,"\n").concat(e.answer)).join("\n\n")})]}),ep<=S.Ni&&!eU.some(e=>!0===e)&&!eB.some(e=>!1===e)&&(0,s.jsx)("div",{className:"fixed-bottom bg-gradient-light",style:{pointerEvents:"none"},children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"".concat(E?"col-lg-2":"col-lg-0"," sidebar mt-0 p-0")}),(0,s.jsx)("div",{className:"".concat(E?"col-lg-10":"col-lg-12"," sidebar"),children:(0,s.jsx)("div",{className:"container-xl",children:(0,s.jsx)("div",{className:"col-xl-12",style:{pointerEvents:"auto"},children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsx)(g.Z,{placeholder:"Ask a followup question",initialQuestionFromCache:"",initialContext:"",defaultNumRowsToShow:1,customSearchHandler:(e,t)=>fetchFollowupSearchResults(e,t),answerModel:eI,maxTokenLimit:eR},eh.length)})})})})]})})]}),(d||!e8)&&(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsx)(B,{suggestedFollowups:em[t],customSearchHandler:fetchFollowupSearchResults})})]}),((e8||e7||e4)&&d&&!eB[t]||!e8&&!e7&&!e4)&&(0,s.jsxs)("div",{className:tn?"col-lg-8 col-xl-7":"col-lg-4 col-xl-4",children:[(0,s.jsx)("div",{className:e8||e7||e4?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 ms-0 ".concat(d?"mb-10":""),children:(0,s.jsxs)("div",{style:{visibility:(e8||e7||e4)&&d?"hidden":"visible"},children:[!eB[t]&&(0,s.jsx)(p.E.div,{layout:!0,initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,s.jsx)(Z,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eq[t]})}),eB[t]&&(0,s.jsx)(Z,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eq[t]})]})}),(0,s.jsx)("div",{className:"container-xl mt-4 align-items-end"})]})]})]},c)})]})]}):null}Search.defaultProps={phindPlan:"Phind Free",paidPlanValid:!1,anonUserId:"",cachedAnswerHistory:[],cachedSuggestedFollowupQuestions:[]};var et=!0,en=Search}},function(e){e.O(0,[74,507,200,805,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);